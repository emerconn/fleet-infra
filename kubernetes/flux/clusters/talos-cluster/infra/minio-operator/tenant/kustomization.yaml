# yaml-language-server: $schema=https://json.schemastore.org/kustomization
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ingress.yaml
- namespace.yaml
- ../../../../../infra/components/storage/minio-operator/tenant.yaml
patches:
- patch: |-
    apiVersion: helm.toolkit.fluxcd.io/v2
    kind: HelmRelease
    metadata:
      name: minio-tenant
      namespace: flux-system
    spec:
      targetNamespace: minio-tenant-cherry
      values:
        tenant:
          name: cherry
          pools:
          - servers: 1
            name: pool-0
            volumesPerServer: 1
            size: 10Gi
            storageClassName: synology-csi-ext4-delete
          metrics:
            enabled: true
          ingress:
            console:
              enabled: true
              ingressClassName: traefik
              tls: ["tenant-cherry-ingress-tls"]
              host: cherry.minio-tenant.homelab.emerconnelly.com
