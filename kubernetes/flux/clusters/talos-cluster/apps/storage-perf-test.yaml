kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: test-claim-ext4
  namespace: default
spec:
  storageClassName: synology-csi-ext4-delete
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 150G
---
# kind: PersistentVolumeClaim
# apiVersion: v1
# metadata:
#   name: test-claim-btrfs
#   namespace: default
# spec:
#   storageClassName: synology-csi-btrfs-delete
#   accessModes:
#   - ReadWriteOnce
#   resources:
#     requests:
#       storage: 150G
---
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: test-claim-nfs
  namespace: default
spec:
  storageClassName: nfs-client-delete
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 150G
---
# apiVersion: batch/v1
# kind: Job
# metadata:
#   name: read
#   namespace: default
# spec:
#   template:
#     metadata:
#       name: read
#       labels:
#         app: speedtest
#         job: read
#     spec:
#       containers:
#       - name: read
#         image: ubuntu:xenial
#         command: ["dd", "if=/mnt/pv/test.img", "of=/dev/null", "bs=8k"]
#         volumeMounts:
#         - mountPath: "/mnt/pv"
#           name: test-volume
#       volumes:
#       - name: test-volume
#         persistentVolumeClaim:
#           claimName: test-claim
#       restartPolicy: Never
---
apiVersion: batch/v1
kind: Job
metadata:
  name: write
  namespace: default
spec:
  template:
    metadata:
      name: write
      labels:
        app: speedtest
        job: write
    spec:
      containers:
      - name: write
        image: ubuntu:latest
        command: ["dd", "if=/dev/zero", "of=/mnt/pv/test.img", "bs=1G", "count=100", "oflag=dsync", "status=progress"]
        volumeMounts:
        - mountPath: "/mnt/pv"
          name: test-claim-nfs
      volumes:
      - name: test-claim-ext4
        persistentVolumeClaim:
          claimName: test-claim-ext4
      - name: test-claim-nfs
        persistentVolumeClaim:
          claimName: test-claim-nfs
      restartPolicy: Never
